-- 커뮤니티 글 관리 테이블--------------------------------
create table community (
    seq number not null,                -- 글번호
    id varchar2(30) not null,           -- 아이디
    name varchar2(40) not null,         -- 이름
    subject varchar2(255) not null,     -- 제목
    content varchar2(4000) not null,    -- 내용
    hit number default 0,               -- 조회수
    logtime date default sysdate,       -- 작성일
    category varchar2(40) not null,     -- 카테고리 선택
    primary key(seq)
);
-- 테이블 구조 확인
desc community; 
-- 테이블 삭제
drop table community purge;
-- table 목록
select * from tab;
-- 시퀀스 객체 생성
create sequence seq_community nocache nocycle;
-- 시퀀스 객체 삭제
drop sequence seq_community;

-- 글 데이터 저장
insert into community values
(seq_community.nextval, 'hong', '홍길동', '내일은', '웃으리...', 0, sysdate, 'javascript');

-- 전체 확인
select * from community;
select * from member;

-- 특정 글번호로 확인
select * from community where seq=3;
-- 총 데이터수 구하기
select count(*) as cnt from community;

-- 데이터 삭제
delete community where seq=3;
delete community;

-- 조회수 증가
update community set hit=hit+1 where seq=3;

-- DB 저장
commit;

----------------Member SQL-------------------
------------------------------------------------------------

--- 1. Create Table
create table member (
    name varchar2(30) not null,     -- 이름(닉네임)
    id varchar2(30) primary key,    -- 아이디
    pwd varchar2(30) not null,      -- 패스워드
    pic blob,                       -- 사진
    logtime date                    -- 접속로그
);

-- 2. Check Table Description
desc member;
-- 3. Delete Table
drop table member purge;
-- Table List
select * from tab;
-- 1) Data Appending into the Table
insert into member values('홍길동', 'hong@gmail.com', '1234', EMPTY_BLOB(), sysdate);

-- 2) Data Searching
select * from member;
select * from member where id='hong@gmail.com';
select * from member where id='hong@gmail.com' and pwd='1234';
SELECT * FROM
    (SELECT ROWNUM rn, tt.* FROM
        (SELECT * FROM member ORDER BY name ASC) 
    tt)
WHERE rn>=1 and rn<=5;

-- 3) Modify Data
update member set tel2='5555' where id='hong@gmail.com';

-- 3-1) Modify Data2
UPDATE member SET pwd='1111' where id='hong@gmail.com';

-- 4) Delete Data
delete member where id='hong@gmail.com';

-- 5) Commit
commit;

